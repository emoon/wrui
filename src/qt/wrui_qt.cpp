#include "../../include/wrui.h"
#include <QApplication>

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static int app_run(void* app) {
	GUApplication* t = (GUApplication*)app;
	QApplication* qt_app = (QApplication*)t->p;
	return qt_app->exec();
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static GUApplication* application_create() {
	int argc = 0;
	GUApplication* app = new GUApplication;
	app->p = (void*) new QApplication(argc, 0);
	app->run = app_run;
	return app;
}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

static Wrui s_wrui = {
	application_create,
	0,
	0,
};

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

extern "C" {

Wrui* wrui_get() {
	return &s_wrui;
}

}
